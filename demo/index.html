<!DOCTYPE html>
<html>

<head>
    <title>BloopLabs - Demo</title>
    <style>
        body {
            margin: 0px;
            padding: 0px;
        }
    </style>
    <script>
        class Food extends Edible {
            constructor(opts) {
                super(opts);
                this.healthImpact = opts.healthImpact;
                this.size = opts.size;
            }
            getColor(theme) {
                return theme.foodColor;
            }
        }
        class Poison extends Edible {
            constructor(opts) {
                super(opts);
                this.healthImpact = opts.healthImpact;
                this.size = opts.size;
            }
            getColor(theme) {
                return theme.poisonColor;
            }
        }
        function init() {
            const eli = new Brain(JSON.parse('{"inputs":["nearestAgentX","nearestAgentY","nearestAgentIsAgro","nearestEdibleX","nearestEdibleY","nearestEdibleIsPoison"],"outputs":["desiredForceX","desiredForceY","acceleration","agro"],"midLayerNodes":8,"weights":[-0.6,-0.1,0.2,-0.1,0.9,0.2,-0.3,0,0.6,0.9,-0.9,0.5,0.8,-0.5,-0.3,-0.5,0,-0.3,0.6,-0.7,0.2,0.4,-0.3,-0.1,0.5,1,0.3,-0.1,0.8,0,-0.8,0.9,0.8,-0.3,0.8,0.3,0.9,0.4,-0.1,0.2,-0.9,0.1,0.5,-0.2,-0.6,0.4,0.4,0.2,-0.2,-0.2,0.7,-0.6,-0.3,-0.5,0.1,0.9,0.3,0.6,1,-0.5,-0.9,-0.6,0.5,-0.1,-0.8,-0.3,0.4,0.6,0.7,0.9,0.5,-0.2,0.8,-0.8,-0.5,-0.1,-0.7,-1,-0.4,-0.7,-0.1,0.2,0.9,0.4,-0.3,0.4,0.7,0.8,-1,-0.7,0,0.4]}'));
            const eater = new Brain(JSON.parse('{"inputs":["nearestAgentX","nearestAgentY","nearestAgentIsAgro","nearestEdibleX","nearestEdibleY","nearestEdibleIsPoison"],"outputs":["desiredForceX","desiredForceY","acceleration","agro"],"midLayerNodes":8,"weights":[0.7,0.7,0.6,0.5,0,-0.8,0.1,0.4,-0.2,-0.6,0.3,0.5,0.7,-1,0.3,-0.9,-0.8,-0.1,-1,0.4,0.6,0.3,0.1,0.9,0.9,-0.8,-0.1,0.4,-0.5,-0.3,-0.9,-0.4,-0.8,0.7,-0.4,0.8,-0.6,-0.5,0.8,-0.7,0.7,0.2,-0.6,-0.5,0.3,0.7,0.2,0.1,-0.3,0.7,0.3,-0.9,0.3,-0.1,0.9,-0.5,0.6,0.6,0.1,-0.3,0.4,0.7,-0.6,-0.3,-0.2,0.7,0.2,0,-0.6,-0.4,-0.4,0,0.3,0.1,-0.3,0.4,0.7,0.9,-0.5,-0.3,-0.9,0.8,0.5,0,0.4,0.8,0.1,-0.8,-0.1,0.7,0,-0.4]}'));
            const avoider = new Brain(JSON.parse('{"inputs":["nearestAgentX","nearestAgentY","nearestAgentIsAgro","nearestEdibleX","nearestEdibleY","nearestEdibleIsPoison"],"outputs":["desiredForceX","desiredForceY","acceleration","agro"],"midLayerNodes":8,"weights":[-0.8,0.8,0.5,0,0.3,-0.8,0.4,0.7,0.3,0.5,0.7,0.9,0,-0.1,-0.8,-0.9,-0.3,0.8,-0.4,0.3,0.9,0.7,-0.6,0.7,-0.1,-0.2,-0.9,-0.9,0.6,0.1,-0.9,-0.4,-0.8,0.7,-0.4,0.8,-0.6,-0.5,0.8,-0.7,0.7,0.2,-0.6,-0.5,0.3,0.7,0.2,0.1,-0.3,0.7,0.3,-0.9,0.3,-0.1,0.9,-0.5,0.6,0.6,0.1,-0.3,0.8,-0.5,0.5,0.3,0.6,0.1,-0.2,-0.1,-0.6,-0.3,-0.3,0.1,0.6,-0.2,-0.1,0.7,0.6,-0.1,0.2,-0.9,-0.1,-0.1,-0.8,0.7,0.8,0.2,-0.6,1,-0.7,0.2,0.6,-0.4]}'));
            const sim = new Simulation({
                canvasId: 'main-canvas',
                framerate: 30,
                theme: 'bloop',
                entityConfig: [
                    { groupId: 'avoider', Entity: Agent, count: 60, max: 100, min: 20, opts: { size: 8, brain: avoider } },
                    { groupId: 'normies', Entity: Agent, count: 10, max: 100, min: 20, opts: { size: 8 } },
                    { groupId: 'poison', Entity: Poison, count: 60, opts: { healthImpact: -10000, size: 5 } },
                    { groupId: 'food', Entity: Food, count: 30, opts: { healthImpact: 5000, size: 4 } }
                ]
            });
            sim.run();
        }
    </script>
</head>

<body onload="init()">
    <canvas id="main-canvas"></canvas>
</body>